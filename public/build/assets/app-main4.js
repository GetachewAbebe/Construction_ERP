document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".hardened-glass").forEach(e=>{e.addEventListener("mousemove",function(s){const t=e.getBoundingClientRect(),r=s.clientX-t.left,d=s.clientY-t.top;if(r>0&&r<t.width&&d>0&&d<t.height){const m=t.width/2,u=t.height/2,f=(d-u)/10,g=(m-r)/10;e.style.transform=`perspective(1000px) rotateX(${f}deg) rotateY(${g}deg) translateY(-10px) scale(1.02)`}else e.style.transform=""}),e.addEventListener("mouseleave",()=>e.style.transform="")}),document.querySelectorAll(".stagger-entrance").forEach((e,s)=>{e.style.animationDelay=`${(s+1)*.1}s`});const c=document.getElementById("cmdInput"),o=document.getElementById("cmdResults"),n=document.getElementById("commandPalette");c&&o&&n&&(window.renderCommandResults=function(e=""){if(!window.paletteLinks)return;const s=window.paletteLinks.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));o.innerHTML=s.map(t=>`
                <a href="${t.url}" class="d-flex align-items-center gap-3 p-3 text-decoration-none text-erp-deep rounded-3 hover-bg-light transition-all">
                    <i class="bi ${t.icon} fs-5 opacity-75"></i>
                    <span class="fw-bold">${t.name}</span>
                </a>
            `).join("")},document.addEventListener("keydown",function(e){e.ctrlKey&&e.key==="k"&&(e.preventDefault(),n.style.display="flex",c.focus(),window.renderCommandResults()),e.key==="Escape"&&(n.style.display="none")}),c.addEventListener("input",e=>window.renderCommandResults(e.target.value)),n.addEventListener("click",e=>{e.target===n&&(n.style.display="none")})),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)})});window.markNotificationRead=function(a){fetch(`/notifications/${a}/mark-as-read`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}})};window.openGlobalRejectModal=function(a,l,c){const o=document.getElementById("globalRejectModal");if(!o)return;const n=new bootstrap.Modal(o);document.getElementById("globalRejectForm").action=a,document.getElementById("rejectTypeLabel").innerText=l,document.getElementById("globalRejectForm").onsubmit=function(){return window.markNotificationRead(c),!0},n.show()};window.showToast=function(a,l="success",c="System Update"){const o=document.getElementById("erpToast");if(!o)return;const n=document.getElementById("toastIcon"),i=document.getElementById("toastIconContainer"),e=document.getElementById("toastTitle"),s=document.getElementById("toastMessage");i.className="me-3 rounded-circle d-flex align-items-center justify-content-center ",l==="success"?(i.classList.add("bg-success-soft","text-success"),n.className="bi bi-check-circle-fill"):l==="danger"||l==="error"?(i.classList.add("bg-danger-soft","text-danger"),n.className="bi bi-exclamation-triangle-fill"):(i.classList.add("bg-primary-soft","text-primary"),n.className="bi bi-info-circle-fill"),e.innerText=c,s.innerText=a,new bootstrap.Toast(o,{delay:5e3}).show()};window.premiumConfirm=function(a,l,c,o="",n=""){try{const i=document.getElementById("premiumConfirmModal");if(!i){confirm(l)&&document.getElementById(c).submit();return}document.getElementById("confirmTitle").innerText=a,document.getElementById("confirmMessage").innerText=l,document.getElementById("confirmUserName").innerText=o||"",document.getElementById("confirmUserName").style.display=o?"block":"none";const e=document.getElementById("confirmUserImage"),s=document.getElementById("confirmUserInitial");n?(e.src=n,e.style.display="block",s.style.display="none"):(e.style.display="none",s.style.display="flex",s.innerText=o?o.charAt(0).toUpperCase():"?");const t=document.getElementById("confirmActionBtn"),r=t.cloneNode(!0);t.parentNode.replaceChild(r,t),r.addEventListener("click",function(){const m=document.getElementById(c);m&&m.submit(),bootstrap.Modal.getInstance(i).hide()}),new bootstrap.Modal(i).show()}catch(i){console.error("Confirm Error:",i),confirm(l)&&document.getElementById(c).submit()}};
